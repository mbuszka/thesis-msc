\documentclass[english, mgr, shortabstract]{iithesis}

\usepackage[backend=biber,sorting=none,language=english]{biblatex}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{stmaryrd}
\usepackage{listings}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{xcolor}

\usepackage[scale=0.8]{FiraMono}

\lstdefinelanguage{idl}{%
  alsoletter={-?\#:},
  otherkeywords={(,),\{,\},[,]},
  morekeywords={def,fun,def-data,def-struct,match,let,error},
  morekeywords=[2]{String,Integer,Any,Boolean},
  morekeywords=[3]{(,),\{,\},[,]},
  morekeywords=[4]{\#:bar,\#:apply,\#:atomic,\#:no-defun,\#:name,\#t, \#f, \#:foo},
  sensitive=true,
  morestring=[b]",
  morecomment=[l]{;;}
}

\lstset{%
  basicstyle=\ttfamily\color{black},
  mathescape=true,
  showstringspaces=false,
  keywordstyle={\color{green!50!black}},
  keywordstyle=[2]{\color{blue!50!black}}, 
  keywordstyle=[3]{\color{gray}},
  keywordstyle=[4]{\color{blue!80!black}},
  commentstyle=\color{gray}\itshape,
  stringstyle=\color{green!80!black},
  identifierstyle=\color{black},
  escapechar=@,
  language=idl
} 

% Allows to use lstinline in the math mode
% See https://tex.stackexchange.com/questions/127010/how-can-i-make-lstinline-function-normally-inside-math-mode
\expandafter\patchcmd\csname \string\lstinline\endcsname{%
  \leavevmode
  \bgroup
}{%
  \leavevmode
  \ifmmode\hbox\fi
  \bgroup
}{}{%
  \typeout{Patching of \string\lstinline\space failed!}%
}

\newcommand{\LC}{\(\lambda\)-calculus}
\newcommand{\IDL}{\textit{IDL}}
\newcommand{\bb}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\anf}[2]{\bb{#1}#2}
\newcommand{\atomic}[1]{[ #1 ]_{a}}
\newcommand{\anfSeq}[2]{\bb{#1}_{s} #2}
\newcommand{\e}[1]{\lstinline{#1}}
\newcommand{\tuple}[1]{\left< #1 \right>}
\newcommand{\VA}[0]{\mathit{VAddr}}
\newcommand{\KA}[0]{\mathit{KAddr}}
\newcommand{\VS}[0]{\mathit{VStore}}
\newcommand{\KS}[0]{\mathit{KStore}}

\newcommand{\cps}[2]{\bb{#1}_c #2}
\newcommand{\dir}[1]{\bb{#1}_d}
\newcommand{\trivial}{\mathit{trivial}}
\newcommand{\atom}{\mathit{atomic}}
\newcommand{\allAtomic}{\mathit{allAtomic}}
\newcommand{\noneAtomic}{\mathit{noneAtomic}}
\newcommand{\defun}{\mathit{defun}}
\newcommand{\mkBranch}{\mathit{mkBranch}}
\newcommand{\mkApply}{\mathit{mkApply}}
\newcommand{\semt}{\lstinline!semt!}

\mathchardef\mh="2D

\addbibresource{bibliography.bib}
\DeclareFieldFormat[
  article,inproceedings,incollection,book,misc,report]{title}{#1}

\englishtitle{The Functional Correspondence Applied:\fmlinebreak An Implementation of a Semantics Transformer}

\polishtitle{\dots}

\advisor{dr hab. Dariusz Biernacki}

\author{Maciej Buszka}

\input{front/abstract-en.tex}
\input{front/abstract-pl.tex}

\begin{document}
  \input{main/introduction.tex}
  \input{main/functional-correspondence.tex}
  \input{main/transformer.tex}
  \input{main/case-studies.tex}
  \input{main/conclusions.tex}

  \appendix
  \input{main/manual.tex}

  \printbibliography[heading=bibintoc]
\end{document}